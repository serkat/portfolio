/*
 porto 2016-07-25 
*/
!function(a){a.isScrollToFixed=function(b){return!!a(b).data("ScrollToFixed")},a.ScrollToFixed=function(b,c){function d(){w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed"),A=-1,x=w.offset().top,y=w.offset().left,q.options.offsets&&(y+=w.offset().left-w.position().left),z==-1&&(z=y),r=w.css("position"),v=!0,q.options.bottom!=-1&&(w.trigger("preFixed.ScrollToFixed"),i(),w.trigger("fixed.ScrollToFixed"))}function e(){var a=q.options.limit;return a?"function"==typeof a?a.apply(w):a:0}function f(){return"fixed"===r}function g(){return"absolute"===r}function h(){return!(f()||g())}function i(){f()||(B.css({display:w.css("display"),width:w.outerWidth(!0),height:w.outerHeight(!0),float:w.css("float")}),cssOptions={"z-index":q.options.zIndex,position:"fixed",top:q.options.bottom==-1?m():"",bottom:q.options.bottom==-1?"":q.options.bottom,"margin-left":"0px"},q.options.dontSetWidth||(cssOptions.width=w.width()),w.css(cssOptions),w.addClass(q.options.baseClassName),q.options.className&&w.addClass(q.options.className),r="fixed")}function j(){var a=e(),b=y;q.options.removeOffsets&&(b="",a-=x),cssOptions={position:"absolute",top:a,left:b,"margin-left":"0px",bottom:""},q.options.dontSetWidth||(cssOptions.width=w.width()),w.css(cssOptions),r="absolute"}function k(){h()||(A=-1,B.css("display","none"),w.css({"z-index":u,width:"",position:s,left:"",top:t,"margin-left":""}),w.removeClass("scroll-to-fixed-fixed"),q.options.className&&w.removeClass(q.options.className),r=null)}function l(a){a!=A&&(w.css("left",y-a),A=a)}function m(){var a=q.options.marginTop;return a?"function"==typeof a?a.apply(w):a:0}function n(){if(a.isScrollToFixed(w)){var b=v;v?h()&&(x=w.offset().top,y=w.offset().left):d();var c=a(window).scrollLeft(),n=a(window).scrollTop(),r=e();q.options.minWidth&&a(window).width()<q.options.minWidth?h()&&b||(p(),w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed")):q.options.maxWidth&&a(window).width()>q.options.maxWidth?h()&&b||(p(),w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed")):q.options.bottom==-1?r>0&&n>=r-m()?g()&&b||(p(),w.trigger("preAbsolute.ScrollToFixed"),j(),w.trigger("unfixed.ScrollToFixed")):n>=x-m()?(f()&&b||(p(),w.trigger("preFixed.ScrollToFixed"),i(),A=-1,w.trigger("fixed.ScrollToFixed")),l(c)):h()&&b||(p(),w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed")):r>0?n+a(window).height()-w.outerHeight(!0)>=r-(m()||-o())?f()&&(p(),w.trigger("preUnfixed.ScrollToFixed"),"absolute"===s?j():k(),w.trigger("unfixed.ScrollToFixed")):(f()||(p(),w.trigger("preFixed.ScrollToFixed"),i()),l(c),w.trigger("fixed.ScrollToFixed")):l(c)}}function o(){return q.options.bottom?q.options.bottom:0}function p(){var a=w.css("position");"absolute"==a?w.trigger("postAbsolute.ScrollToFixed"):"fixed"==a?w.trigger("postFixed.ScrollToFixed"):w.trigger("postUnfixed.ScrollToFixed")}var q=this;q.$el=a(b),q.el=b,q.$el.data("ScrollToFixed",q);var r,s,t,u,v=!1,w=q.$el,x=0,y=0,z=-1,A=-1,B=null,C=function(a){w.is(":visible")&&(v=!1,n())},D=function(a){window.requestAnimationFrame?requestAnimationFrame(n):n()},E=function(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1};q.init=function(){q.options=a.extend({},a.ScrollToFixed.defaultOptions,c),u=w.css("z-index"),q.$el.css("z-index",q.options.zIndex),B=a("<div />"),r=w.css("position"),s=w.css("position"),t=w.css("top"),h()&&q.$el.after(B),a(window).bind("resize.ScrollToFixed",C),a(window).bind("scroll.ScrollToFixed",D),"ontouchmove"in window&&a(window).bind("touchmove.ScrollToFixed",n),q.options.preFixed&&w.bind("preFixed.ScrollToFixed",q.options.preFixed),q.options.postFixed&&w.bind("postFixed.ScrollToFixed",q.options.postFixed),q.options.preUnfixed&&w.bind("preUnfixed.ScrollToFixed",q.options.preUnfixed),q.options.postUnfixed&&w.bind("postUnfixed.ScrollToFixed",q.options.postUnfixed),q.options.preAbsolute&&w.bind("preAbsolute.ScrollToFixed",q.options.preAbsolute),q.options.postAbsolute&&w.bind("postAbsolute.ScrollToFixed",q.options.postAbsolute),q.options.fixed&&w.bind("fixed.ScrollToFixed",q.options.fixed),q.options.unfixed&&w.bind("unfixed.ScrollToFixed",q.options.unfixed),q.options.spacerClass&&B.addClass(q.options.spacerClass),w.bind("resize.ScrollToFixed",function(){B.height(w.height())}),w.bind("scroll.ScrollToFixed",function(){w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed"),n()}),w.bind("detach.ScrollToFixed",function(b){E(b),w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed"),a(window).unbind("resize.ScrollToFixed",C),a(window).unbind("scroll.ScrollToFixed",D),w.unbind(".ScrollToFixed"),B.remove(),q.$el.removeData("ScrollToFixed")}),C()},q.init()},a.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},a.fn.scrollToFixed=function(b){return this.each(function(){new a.ScrollToFixed(this,b)})}}(jQuery);